---
title: "Mysql Interview Questions"
date: 2025-02-19T15:16:42+08:00
lastmod: 2025-02-19T15:16:42+08:00
author: ["SwimmingLiu"]

categories:
- 💻 Job

tags:
- Java
- MySQL

keywords:
- Java
- MySQL

description: "" # 文章描述，与搜索优化相关
summary: "" # 文章简单描述，会展示在主页
weight: # 输入1可以顶置文章，用来给文章展示排序，不填就默认按时间排序
slug: ""
math: true
draft: false # 是否为草稿
comments: true
showToc: true # 显示目录
TocOpen: false # 自动展开目录
autonumbering: true # 目录自动编号
hidemeta: false # 是否隐藏文章的元信息，如发布日期、作者等
disableShare: true # 底部不显示分享栏
searchHidden: false # 该页面可以被搜索到
showbreadcrumbs: true #顶部显示当前路径
mermaid: true
cover:
    image: ""
    caption: ""
    alt: ""
    relative: false
---

# MySQL面试题

## 1.MySQL 中的数据排序是怎么实现的？

1.排序方法：索引排序和文件排序 (filesort)
2.索引排序：如果`order by xxx`的字段为索引字段，则利用索引进行排序。效率最高，索引默认有序。
3.文件排序 (filesort)：内存排序(单路排序和双路排序)和磁盘排序，具体取决于排序数据的大小。其中，内存排序使用单路排序或双路排序，取决于`max_length_for_sort_data`(默认为4096个字节)
4.双路排序：取`row_id`(如果有主键，则为主键)和`select a,b,c order by xxx`的`xxx`字段放入`sort_buffer`(排序缓存)中，将排序后的`row_id`回表查询`a,b,c`
5.单路排序: 直接把要查的所有字段放入`sort_buffer`里，排序后直接得到结果集合
6.磁盘排序（归并排序）:将数据分为多份文件，单独对文件进行排序，然后合并成一个有序的大文件

## 2. MySQL 的 Change Buffer 是什么？它有什么作用？

1.ChangeBuffer定义：Change Buffer是InnoDB缓冲当中的一块缓存区，用于暂存二级索引的修改，避免二级索引页修改产生的随机IO
2.ChangeBuffer注意事项：只能用于二级索引，不能用于其他任何索引，包括主键索引和唯一索引都不行。
3.如果ChangeBuffer挂了，更改操作未执行，是否会出现脏数据？
首先，ChangeBuffer也会保存在磁盘空间里面，redo log会记录Change Buffer当中的修改操作，确保数据一致性。

知识拓展1：一级索引和二级索引区别

>**一级索引（聚簇索引）**：数据表的主键索引，数据和索引存储在同一B+树的叶子节点中。每个表只能有一个一级索引。
>
>**二级索引（非聚簇索引）**：除主键外的其他索引，叶子节点存储索引列的值和对应的主键值。通过二级索引查询时，需要先通过二级索引获取主键值，再通过主键值查询数据，这个过程称为“回表”。

知识拓展2:  MySQL中有哪些常见索引？都有什么区别？

>在MySQL中，索引是提高查询效率的关键工具。常见的索引类型包括主键索引、唯一索引、普通索引、全文索引和空间索引。
>
>**1. 主键索引（Primary Key Index）**
>
>- **定义**：主键索引是一种特殊的唯一索引，用于唯一标识表中的每一行数据。每个表只能有一个主键索引，且主键列的值不能为空。
>- **特点**：主键索引的叶子节点存储完整的数据行，因此查询效率高。在InnoDB存储引擎中，主键索引是聚簇索引，数据存储与索引结构合并。
>
>**2. 唯一索引（Unique Index）**
>
>- **定义**：唯一索引确保索引列的每个值都是唯一的，但允许有空值。与主键索引类似，不同之处在于唯一索引允许列值为NULL。
>- **特点**：唯一索引的叶子节点存储索引列的值和对应的主键值。在InnoDB中，唯一索引是非聚簇索引，数据存储与索引结构分开。
>
>**3. 普通索引（Index）**
>
>- **定义**：普通索引是最基本的索引类型，没有任何限制。索引列的值可以重复，也可以为NULL。
>- **特点**：普通索引的叶子节点存储索引列的值和对应的主键值。在InnoDB中，普通索引是非聚簇索引，数据存储与索引结构分开。
>
>**4. 全文索引（Fulltext Index）**
>
>- **定义**：全文索引用于对文本数据进行全文搜索，适用于MyISAM存储引擎。它允许对文本字段进行复杂的搜索，如查找包含特定单词的记录。
>- **特点**：全文索引的叶子节点存储文档的词项信息。在MyISAM中，全文索引是非聚簇索引，数据存储与索引结构分开。
>
>**5. 空间索引（Spatial Index）**
>
>- **定义**：空间索引用于对地理空间数据进行索引，支持空间数据类型的快速查询。它适用于存储地理位置、地图等空间数据的表。
>- **特点**：空间索引的叶子节点存储空间数据的索引信息。在MyISAM中，空间索引是非聚簇索引，数据存储与索引结构分开。
>
>**总结**：
>
>- **主键索引**：用于唯一标识每一行数据，值不能为空。
>- **唯一索引**：确保索引列的值唯一，但允许有空值。
>- **普通索引**：最基本的索引类型，允许重复和空值。
>- **全文索引**：用于对文本数据进行全文搜索，适用于MyISAM存储引擎。
>- **空间索引**：用于对地理空间数据进行索引，支持空间数据类型的快速查询。

## 3. 详细描述一条 SQL 语句在 MySQL 中的执行过程。

1.连接器判断用户是否成功建立连接，数据库连接的权限校验
2.分析器分析SQL语法和词法是否有误
3.优化器生成SQL的执行计划，确定使用的索引和调整where的执行顺序（包括连表顺序）
4.执行器判断当前用户是否有权限查询该表，然后执行该SQL语句

[参考文献] [执行一条 select 语句，期间发生了什么？](https://xiaolincoding.com/mysql/base/how_select.html)

## [补充] 3.  MySQL 日志：undo log、redo log、binlog 有什么用？

>undo log（回滚日志）：是 Innodb 存储引擎层生成的日志，实现了事务中的原子性，主要用于事务回滚和 MVCC。
>redo log（重做日志）：是 Innodb 存储引擎层生成的日志，实现了事务中的持久性，主要用于掉电等故障恢复；
>binlog （归档日志）：是 Server 层生成的日志，主要用于数据备份和主从复制；

直接看参考文献当中的七个问题和其解决方案

[参考文献] [MySQL 日志：undo log、redo log、binlog 有什么用？](https://xiaolincoding.com/mysql/log/how_update.html)

## 4. MySQL 的存储引擎有哪些？它们之间有什么区别？

`InnoDB` : 支持事务、**行锁**、外键; 高并发性能、支持高负载的OLTP应用 (银行交易、电子商务订单、库存管理等);  聚集索引存储，检索效率高

`MyISAM`: **表锁**、**不**支持事务和外键; 适用于读多写少的场景(数据仓库); 较高读性能和j较快的表级锁定

`MEMORY`: 存储在内存中，速度快，重启后数据丢失; 适用于临时数据存储和快速存储

![MySQL常见存储引擎](https://pic.code-nav.cn/mianshiya/question_picture/1853124367721336833/Xk2YjZcF_MySQL_Storage_Engine_mianshiya.png)

## 5. MySQL 的索引类型有哪些？

| 划分方向 | 索引类型                                                     |
| -------- | ------------------------------------------------------------ |
| 数据结构 | B+树索引、Hash索引、倒排索引 (全文索引)、R-树索引 (多维空间树)、位图索引(Bitmap) |
| 物理存储 | 聚簇索引、非聚簇索引                                         |
| 字段特性 | 主键索引、唯一索引、普通索引(二级索引、辅助索引)、前缀索引   |
| 字段个数 | 单列索引、联合索引                                           |

huafen![MySQL索引类型](https://pic.code-nav.cn/mianshiya/question_picture/1870039863862304769/K21MUn6b_1_mianshiya.png)